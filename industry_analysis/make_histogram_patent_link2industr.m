close all
clear all
clc


addpath('../conversion_patent2industry')
load('nr_appear_allyear.mat')


% Make histogram: patents linked to how many industries
[hist_counts, ~] = hist(nr_appear_allyear, ...
    length(0:max(nr_appear_allyear)));

hist_counts = hist_counts ./ sum(hist_counts);


fprintf('Share of patents linked to at least one industry: %3.2f.\n', ...
    1-hist_counts(1))

hist_centers = 0:max(nr_appear_allyear);


set(0, 'DefaultTextFontName', 'Palatino')
set(0, 'DefaultAxesFontName', 'Palatino')

color1_pick = [49, 130, 189] ./ 255;
my_gray = [0.8, 0.8, 0.8];

figureHandle = figure;
set(gcf, 'Color', 'w');
bar(hist_centers, hist_counts, 'FaceColor', color1_pick, 'EdgeColor', 'k')
box off
set(gca,'TickDir','out') 
set(gca,'FontSize',11) % change default font size of axis labels
xlabel('Number of industries that patent is linked to')
ylabel('Share of patents')
xlim([-0.5, 18.5])

set(gca, 'YTick', [], 'YColor', 'white') % turn y-axis off

% title('Patents linked to Industries', 'FontSize', 18)

% Change position and size
set(gcf, 'Position', [100 100 800 500]) % in vector: left bottom width height
set(figureHandle, 'Units', 'Inches');
pos = get(figureHandle, 'Position');
set(figureHandle, 'PaperPositionMode', 'Auto', 'PaperUnits', ...
    'Inches', 'PaperSize', [pos(3), pos(4)])


% annotation(figureHandle,'textarrow',[0.138849929873773 0.144460028050491],...
%     [0.485714285714286 0.454761904761907],'TextEdgeColor','none',...
%     'HorizontalAlignment','left',...
%     'FontSize',12,...
%     'String','9.8%',...
%     'HeadStyle','none');
% 
% annotation(figureHandle,'textarrow',[0.193548387096773 0.192145862552595],...
%     [0.885714285714289 0.873809523809524],'TextEdgeColor','none',...
%     'HorizontalAlignment','left',...
%     'FontSize',12,...
%     'String','22%',...
%     'HeadStyle','none');
% 
% annotation(figureHandle,'textarrow',[0.239831697054698 0.23562412342216],...
%     [0.811904761904763 0.800000000000001],'TextEdgeColor','none',...
%     'HorizontalAlignment','left',...
%     'FontSize',12,...
%     'String','20%',...
%     'HeadStyle','none');
% 
% annotation(figureHandle,'textarrow',[0.282272089761571 0.272089761570827],...
%     [0.601428571428576 0.583333333333334],'TextEdgeColor','none',...
%     'HorizontalAlignment','left',...
%     'FontSize',12,...
%     'String','14%',...
%     'HeadStyle','none');
% 
% annotation(figureHandle,'textarrow',[0.879382889200561 0.884992987377279],...
%     [0.204761904761905 0.185714285714287],'TextEdgeColor','none',...
%     'HorizontalAlignment','left',...
%     'FontSize',12,...
%     'String','1.6%',...
%     'HeadStyle','none');


% Export to pdf
print_pdf_name = horzcat('histogram_nr_ind_linked2.pdf');
print(figureHandle, print_pdf_name, '-dpdf', '-r0')